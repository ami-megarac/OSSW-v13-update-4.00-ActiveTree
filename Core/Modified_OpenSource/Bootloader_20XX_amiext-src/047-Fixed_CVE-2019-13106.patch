--- uboot_patch055/fs/ext4/ext4fs.c	2022-01-07 12:08:19.023695305 +0800
+++ uboot/fs/ext4/ext4fs.c	2022-01-07 12:10:32.591084830 +0800
@@ -61,6 +61,7 @@
 	lbaint_t delayed_skipfirst = 0;
 	lbaint_t delayed_next = 0;
 	char *delayed_buf = NULL;
+	char *start_buf = buf;
 	short status;
 
 	if (blocksize <= 0)
@@ -130,6 +131,7 @@
 			}
 		} else {
 			int n;
+			int n_left;
 			if (previous_block_number != -1) {
 				/* spill */
 				status = ext4fs_devread(delayed_start,
@@ -142,8 +144,9 @@
 			}
 			/* Zero no more than `len' bytes. */
 			n = blocksize - skipfirst;
-			if (n > len)
-				n = len;
+			n_left = len - ( buf - start_buf );
+			if (n > n_left)
+				n = n_left;
 			memset(buf, 0, n);
 		}
 		buf += blocksize - skipfirst;
