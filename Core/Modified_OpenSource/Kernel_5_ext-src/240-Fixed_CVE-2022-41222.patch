--- linux_patch108/mm/mremap.c	2022-10-18 09:52:24.319523479 +0800
+++ linux/mm/mremap.c	2022-10-18 10:18:43.422552986 +0800
@@ -290,12 +290,10 @@
 			 */
 			bool moved;
 
-			if (need_rmap_locks)
-				take_rmap_locks(vma);
+			take_rmap_locks(vma);
 			moved = move_normal_pmd(vma, old_addr, new_addr,
 					old_end, old_pmd, new_pmd);
-			if (need_rmap_locks)
-				drop_rmap_locks(vma);
+			drop_rmap_locks(vma);
 			if (moved)
 				continue;
 #endif
