diff -Naur linux_ori/net/ipv4/fib_semantics.c linux/net/ipv4/fib_semantics.c
--- linux_ori/net/ipv4/fib_semantics.c	2022-08-11 18:57:53.000000000 +0800
+++ linux/net/ipv4/fib_semantics.c	2023-06-05 17:33:00.344602896 +0800
@@ -874,14 +874,14 @@
 			return 0;
 		return 1;
 	}
+	
+	/* cannot match on nexthop object attributes */
+	if (fi->nh)
+		return 1;
 
 	if (cfg->fc_oif || cfg->fc_gw_family) {
 		struct fib_nh *nh;
 
-		/* cannot match on nexthop object attributes */
-		if (fi->nh)
-			return 1;
-
 		nh = fib_info_nh(fi, 0);
 		if (cfg->fc_encap) {
 			if (fib_encap_match(cfg->fc_encap_type, cfg->fc_encap,
diff -Naur linux_ori/tools/testing/selftests/net/fib_nexthops.sh linux/tools/testing/selftests/net/fib_nexthops.sh
--- linux_ori/tools/testing/selftests/net/fib_nexthops.sh	2022-08-11 18:57:53.000000000 +0800
+++ linux/tools/testing/selftests/net/fib_nexthops.sh	2023-06-05 17:40:57.916380543 +0800
@@ -556,6 +556,12 @@
 	check_nexthop "id 12" "id 12 via 172.16.1.2 dev veth1 scope link"
 
 	run_cmd "$IP nexthop del id 12"
+	
+	run_cmd "$IP nexthop add id 21 via 172.16.1.6 dev veth1"
+	run_cmd "$IP ro add 172.16.101.0/24 nhid 21"
+	run_cmd "$IP ro del 172.16.101.0/24 nexthop via 172.16.1.7 dev veth1 nexthop via 172.16.1.8 dev veth1"
+	log_test $? 2 "Delete multipath route with only nh id based entry"
+	
 	log_test $? 0 "Delete nexthop by id"
 	check_nexthop "id 52" ""
 
